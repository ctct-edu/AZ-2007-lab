# ラボ01: GitHub Copilot を使用してアプリ開発を加速する

## パート 1: GitHub Copilot ツールを使用してコードを分析および文書化する

### 開始する前に

#### プロジェクトの概要

**あなたの役割**：中小企業のIT担当者

**背景状況**：
- 会社の倉庫管理が紙ベースで非効率
- 在庫確認に時間がかかり、発注タイミングを逃すことがある
- 経営陣から簡易的な在庫管理システムの開発を依頼された

**あなたのミッション**：
倉庫担当者が基本的な在庫管理業務（商品管理、入出庫処理、発注管理）を効率的に行える一時的なソリューションを開発する

**プロジェクトの制約条件**：
- 開発チーム：あなた1名
- 実行環境：倉庫のノートPC
- アプリケーション形式：コンソールアプリケーション
- 要件：使いやすさよりも確実性と保守性を重視

**データ構成**：
在庫管理に必要な以下のCSVファイルを使用します：
- 商品マスター情報
- 在庫情報
- 在庫操作履歴

#### ラボ シナリオ (パート 1)

このパート1では、GitHub Copilotを活用して以下のタスクを実行します：

1. **コード理解**：既存の在庫管理アプリケーションを分析・理解する
2. **文書化**：コードベースの説明とドキュメントを生成する

**学習内容**：
- Visual Studio Code用GitHub Copilot拡張機能の設定
- GitHub Copilotを使用したコードベース分析
- プロジェクトドキュメントの生成

---

## 演習 1: GitHub Copilot 拡張機能を Visual Studio Code 用に構成する

### 手順

#### ステップ 1: Visual Studio Code の起動とGitHub Copilot の連携状態を確認

1. **Visual Studio Code を起動**します

2. **GitHub Copilot のアイコンを探します**
   - Visual Studio Code画面の右下（ステータスバー）を確認
   - GitHub Copilotのアイコン（チェックマークまたは警告マークが表示されているアイコン）を探してください

   **アイコンの状態による判別方法**：
   - チェックマーク付き：すでに連携済み（この演習は完了しています）
   - 警告マーク付き：連携が必要（次のステップに進んでください）

3. **連携が必要な場合の確認**
   - GitHub Copilotアイコンをクリック
   - 表示されるメニューを確認してください

#### ステップ 2: GitHub アカウントとの連携

**重要**：この手順は、GitHub Copilotが未連携の場合のみ実行してください。

1. **サインインプロセスの開始**
   
   以下のいずれかの方法でサインインを開始します：

   **方法A：ステータスバーから**
   - 画面右下のGitHub Copilotアイコンをクリック
   - 表示されるメニューから **GitHub にサインイン** を選択

   **方法B：通知メッセージから**
   - 画面右下に「Sign in to use GitHub Copilot」という通知が表示されている場合
   - 通知内の **Sign in to GitHub** ボタンをクリック

2. **認証ダイアログへの対応**
   
   「GitHub Copilot wants to sign in using GitHub」というダイアログが表示されます：
   - **Allow**（許可する）ボタンをクリック

   **補足説明**：このダイアログは、Visual Studio CodeがあなたのGitHubアカウント情報にアクセスする許可を求めています。

3. **ブラウザでの認証手続き**

   ブラウザが自動的に開き、GitHubの認証ページが表示されます：

   **「Verify Session」ページでの操作**：
   - ページに表示される8桁のコードを確認
   - **Continue** ボタンをクリック

   **「Authorize Application」ページでの操作**：
   - 「Visual Studio Code wants to access your GitHub account」というメッセージを確認
   - **Authorize Visual Studio Code**（Visual Studio Codeを認証する）ボタンをクリック

4. **Visual Studio Code への戻り**

   認証完了後、以下のダイアログが表示される場合があります：
   - 「このサイトが"Visual Studio Code"を開こうとしています」
   - または「VS Codeで開きますか？」
   
   どちらの場合も：
   - **開く** ボタンをクリック

#### ステップ 3: 連携完了の確認

1. **Visual Studio Code の再起動**（推奨）
   
   連携設定を確実に反映させるため、一度Visual Studio Codeを再起動します：
   - Visual Studio Codeを完全に終了
   - 再度Visual Studio Codeを起動

2. **連携状態の最終確認**

   以下の項目を確認してください：

   **確認項目1：チャット機能の表示**
   - 画面上部のツールバー（コマンドセンター）の右側を確認
   - **チャットを開く** ボタン（吹き出しアイコン）が表示されていることを確認

   **確認項目2：GitHub Copilotの状態**
   - 画面右下のステータスバーでGitHub Copilotアイコンを確認
   - チェックマーク付きのアイコンが表示されていることを確認

   **確認項目3：チャット機能の動作確認**
   - **チャットを開く** ボタンをクリック
   - 画面右側にチャットパネルが表示されることを確認
   - メッセージ入力欄が表示されていることを確認

---

## 演習 2: 在庫管理アプリケーションのコードベースを分析する

### 目標
プロジェクトを理解し文書化する前に、在庫管理システムのアーキテクチャと主要機能を把握します。

---

### タスク 1: 開発環境に在庫管理アプリケーションを読み込む

#### ステップ 1: プロジェクトフォルダーの確認

1. **プロジェクトフォルダーの場所を確認**
   - 講師から指示されたプロジェクトフォルダー「InventoryManagementApp」の場所を確認してください
   - 通常はデスクトップまたは指定されたフォルダーに配置されています

#### ステップ 2: Visual Studio Code でプロジェクトを開く

1. **Visual Studio Code を起動**

2. **プロジェクトフォルダーを開く**
   - **[ファイル]** メニュー → **[フォルダーを開く]**
   - **InventoryManagementApp** フォルダーを選択
   - **[フォルダーの選択]** をクリック

3. **信頼設定を確認**
   - 「このフォルダー内のファイルの作成者を信頼しますか？」ダイアログが表示された場合
   - **[はい、作成者を信頼します]** をクリック

> **読み込み時間**: プロジェクトファイルと.NET更新プログラムの読み込みに10〜20秒かかる場合があります

#### ステップ 3: プロジェクト構造の確認

1. **エクスプローラービューでソリューション構造を確認**
   ```
   InventoryManagementApp/
   ├── src/
   │   ├── InventoryManagement.Entities/
   │   ├── InventoryManagement.Data/
   │   ├── InventoryManagement.Core/
   │   └── InventoryManagement.Console/
   └── tests/
       └── UnitTests/
   ```

2. **ソリューションのビルドテスト**
   - ソリューションエクスプローラーで **InventoryManagement.Console** を右クリック
   - **[ビルド]** を選択
   - **警告**は表示される場合がありますが、**エラー**がないことを確認

> **重要**: 講師から特別な指示がない限り、ワークロードの更新プログラムはインストールしないでください

---

### タスク 2: GitHub Copilot を使用して在庫管理アプリケーションのコードベースを説明する

#### ステップ 1: チャットビューを開く

以下のいずれかの方法でチャットビューを開きます：
- 画面上部の **[チャットを開く]** ボタンをクリック
- **Ctrl + Alt + I** キーボードショートカット
- GitHub Copilot状態メニューから **[GitHub Copilot Chat]** を選択

> **認証**: 初回利用時に「GitHub Copilot Chat wants to sign in using GitHub」ダイアログが表示された場合は、**[許可]** をクリックし、GitHubアカウントで認証してください

#### ステップ 2: プロジェクト全体の説明を生成

1. **チャットビューで以下のプロンプトを入力**
   ```plaintext
   @workspace このプロジェクトについて説明してください
   ```

2. **生成された説明を確認**
   
   以下のような説明が生成されます：

   > このプロジェクトは、C#で実装された在庫管理システムです。4つの主要コンポーネントで構成されています：
   > 
   > **1. InventoryManagement.Entities**: エンティティ層
   > - エンティティ（Product、Stock、StockHistoryなど）
   > - 列挙型（StockOperationType、StockOperationResult）
   > - データモデルの定義
   > 
   > **2. InventoryManagement.Data**: データアクセス層
   > - CSVベースのデータ永続化
   > - ProductData、StockData、StockHistoryDataクラス
   > - CsvDataAccess抽象基底クラス
   > 
   > **3. InventoryManagement.Core**: ビジネスロジック層
   > - サービス（ProductService、StockService、OrderService）
   > - ビジネスルールの実装
   > 
   > **4. InventoryManagement.Console**: ユーザーインターフェース
   > - Program.cs: アプリケーションエントリーポイント
   > - コンソールメニュー操作

#### ステップ 3: 個別クラスの詳細分析

1. **Program.cs ファイルを開く**
   - src/InventoryManagement.Console プロジェクトから **Program.cs** を開く

2. **Program クラスの説明を生成**
   ```plaintext
   @workspace #editor Program クラスについて説明してください
   ```

   > **ヒント**: `#editor` は現在エディターで開いているファイルをコンテキストに含める指定です

3. **ProductService.cs の説明を生成**
   - src/InventoryManagement.Core/Services フォルダーから **ProductService.cs** を開く
   - 同様に説明を生成：
   ```plaintext
   @workspace #editor ProductService.cs ファイルについて説明してください
   ```

#### ステップ 4: データアクセス層の理解

1. **データアクセスファイルをチャットコンテキストに追加**
   - InventoryManagement.Data プロジェクトを展開
   - 以下のファイルをドラッグ&ドロップでチャットビューに追加：
     - **CsvDataAccess.cs**
     - **ProductData.cs**
     - **StockData.cs**
     - **StockHistoryData.cs**

2. **データアクセスクラスの動作説明を生成**
   ```plaintext
   @workspace /explain データアクセスクラスがどのように動作するか説明してください
   ```

3. **生成された説明の要点を確認**
   - **CsvDataAccess クラス**: CSV読み書きの抽象基底クラス
   - **ProductData クラス**: 商品データの操作
   - **StockData クラス**: 在庫データの操作
   - **StockHistoryData クラス**: 在庫履歴の操作
   - **データの流れ**: CSVファイル読み込み → メモリ操作 → CSVファイル保存

#### ステップ 5: CSVデータファイルの確認

1. **CSVファイルの場所を確認**
   - src/InventoryManagement.Console/Data フォルダーを確認
   - 以下のファイルが含まれていることを確認：
     - Products.csv（商品マスター情報）
     - Stocks.csv（在庫情報）
     - StockHistory.csv（在庫操作履歴）

2. **データ関連の理解**
   - エンティティ間はProductIdでリンク
   - 例：StockオブジェクトのProductId → 対応するProductオブジェクトのProductId

---

### タスク 3: アプリケーションをビルドして実行する

実際にアプリケーションを動作させることで、ユーザーインターフェースと機能を理解します。

#### ステップ 1: アプリケーションの起動

1. **ソリューションエクスプローラービューを確認**
   > **注意**: 「エクスプローラービュー」ではなく「ソリューションエクスプローラービュー」を使用してください

2. **アプリケーションを実行**
   - **InventoryManagement.Console** プロジェクトを右クリック
   - **[デバッグ]** → **[新しいインスタンスを開始]** を選択

#### ステップ 2: 基本操作の確認

以下の手順で在庫管理アプリケーションの基本機能をテストします：

1. **メニュー確認**
   - コンソールウィンドウに以下のメニューが表示されます：
   ```
   === 在庫管理システム ===
   1. 商品一覧表示
   2. 商品登録
   3. 在庫確認
   4. 入庫処理
   5. 出庫処理
   6. 発注推奨リスト表示
   0. 終了
   ```

2. **商品一覧の表示**
   - 選択プロンプト: **「1」** と入力
   - **Enter** を押下
   - 登録されている商品の一覧が表示されることを確認

3. **在庫確認**
   - 選択プロンプト: **「3」** と入力
   - **Enter** を押下
   - 商品IDプロンプト: **「P001」** と入力
   - **Enter** を押下
   - 在庫数と保管場所が表示されることを確認

4. **入庫処理**
   - 選択プロンプト: **「4」** と入力
   - **Enter** を押下
   - 商品IDプロンプト: **「P001」** と入力
   - 数量プロンプト: **「10」** と入力
   - 保管場所プロンプト: **「倉庫A」** と入力
   - 備考プロンプト: **「テスト入庫」** と入力
   - **「入庫処理が完了しました。」** メッセージが表示されることを確認

5. **在庫確認（更新確認）**
   - 選択プロンプト: **「3」** と入力
   - 商品IDプロンプト: **「P001」** と入力
   - 在庫数が増加していることを確認

#### ステップ 3: データ更新の確認

1. **出庫処理を実行**
   - 選択プロンプト: **「5」** と入力
   - 商品IDプロンプト: **「P001」** と入力
   - 数量プロンプト: **「5」** と入力
   - 備考プロンプト: **「テスト出庫」** と入力

2. **在庫確認**
   - 選択プロンプト: **「3」** と入力
   - 商品IDプロンプト: **「P001」** と入力
   - 在庫数が減少していることを確認

3. **発注推奨リスト表示**
   - 選択プロンプト: **「6」** と入力
   - 最小在庫数を下回っている商品のリストが表示されることを確認

4. **アプリケーション終了**
   - **「0」** と入力して **Enter**
   - デバッグセッションを停止

> **完了チェック**:
> - アプリケーションが正常に起動する
> - 商品一覧が表示される
> - 入出庫処理が正常に動作する
> - データの更新が永続化される
> - 発注推奨リストが表示される

---

## 演習 3: プロジェクトドキュメントを作成する

### 目標
GitHub Copilotを使用して、プロジェクトの包括的なドキュメントを生成します。

### 必要なドキュメントセクション

以下のセクションを含む充実したドキュメントを作成します：

1. **プロジェクトタイトル** - プロジェクトの明確な名前
2. **説明** - プロジェクトの目的と機能の詳細
3. **プロジェクト構造** - フォルダーとファイルの構成
4. **主要なクラスとインターフェース** - 重要なコンポーネントの一覧
5. **使用方法** - アプリケーションの実行手順
6. **アーキテクチャ** - システムの設計パターンと特徴

---

### タスク 1: GitHub Copilot を使用してプロジェクト ドキュメントを生成する

#### ステップ 1: チャットビューの準備

1. **チャットビューを開く**
   - 既存のチャット履歴をクリアして新しい会話を開始することをお勧めします

2. **コンテキストの設定**
   - 今回は`@workspace`参加者を使用してソリューション全体を対象にします
   - 個別ファイルを追加する必要はありません

#### ステップ 2: プロジェクトドキュメントの生成

1. **包括的なプロンプトを入力**
   ```plaintext
   @workspace このコードリポジトリのプロジェクトドキュメントを生成してください。プロジェクトタイトルは「在庫管理システム」を使用してください。ドキュメントには以下のセクションを含めてください：プロジェクト全体の概要、プロジェクト構造、各プロジェクトの役割、アーキテクチャの特徴。すべてのセクションを生のマークダウンとして書式設定してください。プロジェクト構造はインデント付きの箇条書きを使用して表現してください。".vs"、"bin"、"obj"フォルダーは含めないでください。
   ```

2. **生成結果の確認**
   - 各セクションがマークダウンとして適切に書式設定されていることを確認
   - プロジェクト構造が階層的に表示されていることを確認
   - 主要クラスの説明が含まれていることを確認

> **ヒント**: より詳細な情報が必要な場合は、セクションごとに個別のプロンプトを使用することも可能です

#### ステップ 3: ドキュメントファイルの作成

1. **README.md ファイルを開く**
   - エクスプローラービューでプロジェクトルートに README.md が存在するか確認
   - 存在する場合は開く、存在しない場合は新規作成

2. **生成されたコンテンツをコピー**
   - GitHub Copilotが提案したドキュメントセクションを全選択
   - README.md ファイルに貼り付け

3. **書式設定の調整**
   - 必要に応じてマークダウンの書式を調整
   - インラインチャットを使用して「マークダウンドキュメントの書式設定を修正してください」と依頼することも可能

4. **最終的な内容確認**
   以下の内容が含まれていることを確認：

   ```markdown
   ## プロジェクト全体の概要
   
   このプロジェクトは、**在庫管理システム**を実装したC#コンソールアプリケーションです。.NET 8.0をターゲットフレームワークとして使用し、レイヤードアーキテクチャで設計されています。
   
   ## プロジェクト構造
   
   InventoryManagementApp/
   ├── src/
   │   ├── InventoryManagement.Entities/      # エンティティ層
   │   ├── InventoryManagement.Data/          # データアクセス層
   │   ├── InventoryManagement.Core/          # ビジネスロジック層
   │   └── InventoryManagement.Console/       # プレゼンテーション層
   └── tests/
       └── UnitTests/                         # 単体テスト
   
   ## 各プロジェクトの役割
   
   ### 1. InventoryManagement.Entities (エンティティ層)
   [各プロジェクトの詳細説明]
   
   ## アーキテクチャの特徴
   [アーキテクチャの説明]
   ```

5. **ファイルを保存**

---

### タスク 2: 作業の確認

#### ステップ 1: ドキュメントの検証

1. **プロジェクト構造の一致確認**
   - ドキュメントに記載されたプロジェクト構造が実際のプロジェクト構造と一致することを確認
   - エクスプローラービューを使用して構造を展開・確認

2. **内容の完全性確認**
   - すべての必須セクションが含まれていることを確認
   - 主要クラスとサービスの説明が含まれていることを確認
   - アーキテクチャの特徴が説明されていることを確認

---

## 演習 1-3 まとめ

### パート1で達成したこと

1. **GitHub Copilot環境構築**
   - Visual Studio CodeへのGitHub Copilot拡張機能インストール
   - GitHubアカウントとの連携設定

2. **コードベース理解**
   - 在庫管理アプリケーションの構造分析
   - GitHub Copilotを使用したコード説明生成
   - データアクセスパターンの理解

3. **アプリケーション動作確認**
   - 実際のアプリケーション実行とテスト
   - 基本的な在庫管理業務フロー（商品管理・入出庫・発注管理）の確認

4. **プロジェクト文書化**
   - AI支援による包括的なプロジェクトドキュメント生成
   - マークダウン形式での技術文書作成

### 重要な学習ポイント

- **@workspace参加者**: プロジェクト全体をコンテキストとして利用
- **#editor指定**: 現在開いているファイルをコンテキストに含める
- **インラインチャット**: コード内で直接GitHub Copilotと対話

### 次のステップ

パート2では、GitHub Copilotを使用して新機能の開発を行います。今回学習した基礎知識を活用して、より実践的な開発作業に取り組みましょう。

---

> **トラブルシューティング**
> 
> **問題**: GitHub Copilot拡張機能が認識されない
> **解決策**: Visual Studio Codeを完全に再起動してください
> 
> **問題**: アプリケーションのビルドエラー
> **解決策**: .NETの依存関係が正しく復元されているか確認してください
> 
> **問題**: CSVファイルが見つからないエラー
> **解決策**: Data フォルダー内のCSVファイルが正しく配置されているか確認してください